---
description: "データ分析の基本原則"
globs: ["notebooks/**/*", "reports/**/*", "data/**/*"]
---

# Data Analysis Principles

1. **目的の明確化**: 分析開始前に目的・ゴール・仮説を簡潔に記述し、Notebook上でも明示する。
2. **データ品質の確保**: 完全性・正確性・一貫性を確認する。欠損・異常値・重複の処理方針をコードとテキストで説明する。データを補完・代替値で埋める場合は理由と方法を必ず記載する。
3. **バイアスと因果**: 主観的バイアスを排除し、収集方法の偏りがないかを確認する。相関と因果を混同しない。因果を述べるときは仮説であることを示す。
4. **分析対象の理解**: カラム意味・単位・収集元・更新頻度などを把握し、必要に応じてNotebookへメモする。
5. **トレーサビリティと命名**: 元データを上書きせず、`raw/`, `intermediate/`, `feature/`, `output/` などの階層を用いる。ファイル名だけで「ソース・対象・粒度・日付」が分かる命名（例: `bq__sales__daily__2025-03-01.parquet`）を徹底する。データセット生成用スクリプトやNotebookには `dataset_` などの接頭辞を付ける。
6. **文字化け対策**: I/O時は `encoding='utf-8'` を明示し、他のエンコーディングを使う場合は理由を記載する。
7. **EDAと可視化**: 初期EDAではYData Profiling（`ydata-profiling`）やAutoViz（`autoviz`）などの自動EDAツールを積極的に活用し、データの全体像を素早く把握する。Marimoで可視化を行い、インタラクティブに探索する。色・サイズ・凡例を明示し、1つのグラフに情報を詰め込みすぎず、目的に沿って分割する。可視化結果は専門家でなくても理解できるよう説明文を添える。
8. **データセット作成の明示**: 新規データセットを生成する際はNotebook/READMEに目的と生成プロセスを書き、出力先ディレクトリを分ける。
9. **統計処理の妥当性**: 利用する統計手法の前提条件（独立性・分布など）を確認し、必要なら検証手順を示す。
