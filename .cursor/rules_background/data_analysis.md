# Data Analysis Principles 背景

このドキュメントは[data_analysis.mdc](./../rules/data_analysis.mdc)のルールの背景を説明するものです。

## 1. 目的の明確化

- **背景**: 目的が不明確なまま分析を開始すると、必要のない分析に時間を費やしたり、重要な観点を見落としたりする。
- **効果**: 分析の方向性が明確になり、効率的に作業できる。後から見返したときにも意図が理解できる。

## 2. データ品質の確保

- **背景**: 不完全なデータや異常値をそのまま分析すると、誤った結論を導く可能性がある。
- **効果**: データの信頼性を確保し、正確な分析結果を得られる。処理方針を明記することで、トレーサビリティを確保する。

## 3. バイアスと因果

- **背景**: 主観的なバイアスや収集方法の偏りを見落とすと、誤った結論を導く。また、相関と因果を混同すると、誤った意思決定につながる。
- **効果**: 客観的な分析を実施し、正確な結論を導く。因果を述べる際は仮説であることを明示することで、慎重な判断を促す。

## 4. 分析対象の理解

- **背景**: データの意味や単位を理解せずに分析すると、誤った解釈をする可能性がある。
- **効果**: 正確な分析と解釈が可能になる。

## 5. トレーサビリティと命名

- **背景**: 元データを上書きしたり、ファイル名が不明確だと、後からデータの由来や処理過程を追跡できなくなる。
- **効果**: データの系譜が明確になり、再現性が確保される。
- **実例**: `bq__sales__daily__2025-03-01.parquet`（BigQueryから取得した日次売上データ、2025年3月1日分）

## 6. 文字化け対策

- **背景**: エンコーディングを明示しないと、環境によって文字化けが発生する可能性がある。
- **効果**: 安定したデータ処理が可能になる。

## 7. EDAと可視化

- **背景**: 手動でEDAを行うと時間がかかり、見落としが発生する可能性がある。YData Profilingは包括的なデータプロファイリングレポートを自動生成し、AutoVizは適切なグラフタイプを自動選択してくれる。Marimoを使うことで、インタラクティブに探索できる。
- **効果**: 自動EDAツールで効率的にデータの全体像を把握し、Marimoで詳細を探索することで、洞察を得やすくする。
- **実例**:
  ```python
  # YData Profiling
  from ydata_profiling import ProfileReport
  profile = ProfileReport(df, title="Data Profile Report")
  profile.to_file("reports/data_profile.html")
  
  # AutoViz
  from autoviz import AutoViz_Class
  AV = AutoViz_Class()
  dft = AV.AutoViz("data/sample.csv", chart_format="png")
  ```

## 8. データセット作成の明示

- **背景**: データセット生成の経緯が不明だと、後から使う際に信頼性を判断できない。
- **効果**: データセットの信頼性と再現性を確保する。

## 9. 統計処理の妥当性

- **背景**: 統計手法の前提条件を満たさない場合、結果が不正確になる可能性がある。
- **効果**: 正確な統計処理と結果の信頼性を確保する。

